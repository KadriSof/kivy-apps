<BorderBox@MDFloatLayout>:
    canvas:
        Color:
            rgba: (0, 0, 0, .2)
        Line:
            rectangle: [self.x, self.y, self.width, self.height]
            width: dp(1)

#:import Factory kivy.factory.Factory

#:set color_button (0.784, 0.443, 0.216, 1)  # brown
#:set color_button_pressed (0.659, 0.522, 0.431, 1)  # darker brown
#:set color_font   (0.957, 0.890, 0.843, 1)  # off white

<MySpinnerOption@SpinnerOption>:
    background_color: color_button if self.state == 'down' else color_button_pressed
    background_down: 'atlas://data/images/defaulttheme/button'
    color: color_font

<DeviceItemViewModel>:
    canvas:
        Color:
            rgba: (0, 0, 0, .2)
        Line:
            rectangle: [self.x, self.y, self.width, self.height]
            width: dp(1)

    orientation: 'horizontal'
    size_hint_y: None
    height: dp(80)
    padding: dp(10)
    spacing: dp(5)

    MDIconButton:
        size_hint: (.2, 1)
        icon: 'information-box'
        icon_size: dp(32)
        radius: [self.height / 2, ]
        theme_text_color: 'Custom'
        text_color: app.theme_cls.primary_dark
        on_release: root.get_device_info()

    MDBoxLayout:
        orientation: 'vertical'
        size_hint: (.8, 1)
        spacing: dp(2)

        MDLabel:
            text: root.device_name
            theme_text_color: 'Custom'
            font_style: 'Caption'
            text_color: app.theme_cls.primary_dark

        MDLabel:
            text: root.device_brand
            font_style:
            theme_text_color: 'Custom'
            font_style: 'Overline'
            text_color: app.theme_cls.primary_dark

        MDLabel:
            text: root.device_status
            theme_text_color: 'Custom'
            font_style: 'Overline'
            text_color: app.theme_cls.primary_dark

    MDIconButton:
        id: check_button
        size_hint: (.2, 1)
        icon: 'check'
        icon_size: dp(32)
        radius: [self.height / 2, ]
        theme_text_color: 'Custom'
        text_color: app.theme_cls.primary_dark
        on_release: app.root.get_screen('home_screen').transfer_device(root)
###

<HomeScreen>:
    id: home_screen

    MDFloatLayout:
        md_bg_color: 'white'

        MDBoxLayout:
            #md_bg_color: (1, 1, 0, 0.2)
            size_hint: (1, .1)
            pos_hint: {'x': .0, 'y': .9}
            padding: [dp(10), dp(10)]

            canvas:
                Color:
                    rgba: (0, 0, 0, .2)
                Line:
                    rectangle: [self.x, self.y, self.width, self.height]
                    width: dp(1)

            Button:
                size_hint: (0.125, 1)
                text: "Manage Clients"

            Button:
                size_hint: (0.125, 1)
                text: "Manage Clients"

            Button:
                size_hint: (0.125, 1)
                text: "Manage Clients"

            Button:
                size_hint: (0.125, 1)
                text: "Manage Clients"

            MDBoxLayout:
                #size_hint: (0.4, 1)

            MDFloatingActionButton:
                #size_hint: (0.1, 1)
                md_bg_color: "white"
                type: "standard"
                icon: "logout-variant"
                icon_size: dp(32)
                radius: [self.height / 2, ]
                theme_text_color: 'Custom'
                text_color: app.theme_cls.primary_dark

        MDBoxLayout:
            size_hint: (.2, .9)
            pos_hint: {'x': .0, 'y': 0}
            padding: [dp(10), dp(10)]

            BorderBox:
                size_hint: (1, 1)
                pos_hint: {'x': 0, 'y': 0}

                MDIcon:
                    pos: (self.parent.x + dp(2), self.parent.y + self.parent.height - dp(34))
                    font_size: dp(32)
                    icon: 'timer-sand'
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark

                MDLabel:
                    pos: (self.parent.x + dp(40), self.parent.y + self.parent.height - self.height)
                    size_hint: (None, None)
                    size: (dp(128), dp(32))
                    text: "Pending"
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark

                ScrollView:
                    pos: (self.parent.x, self.parent.y)
                    size_hint: (None, None)
                    size: (self.parent.width, (self.parent.y + self.parent.height - dp(50)))
                    padding: [dp(10), dp(10)]
                    scroll_type: ['bars', 'content']
                    bar_width: 3
                    bar_color: app.theme_cls.primary_dark

                    GridLayout:
                        id: pending_container
                        cols: 1
                        padding: dp(10)
                        spacing: dp(5)
                        size_hint_y: None
                        height: self.minimum_height

        MDBoxLayout:
            size_hint: (.6, .9)
            pos_hint: {'x': .2, 'y': 0}
            padding: [dp(10), dp(10)]
            spacing: dp(10)

            BorderBox:
                size_hint: (0.5, 1)
                pos_hint: {'x': 0, 'y': 0}

                MDIcon:
                    pos: (self.parent.x + dp(2), self.parent.y + self.parent.height - dp(34))
                    font_size: dp(32)
                    icon: 'account-plus'
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark

                MDLabel:
                    pos: (self.parent.x + dp(40), self.parent.y + self.parent.height - self.height)
                    size_hint: (None, None)
                    size: (dp(128), dp(32))
                    text: "Client"
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark

                MDIconButton:
                    #md_bg_color: (0, 0, 0, 0.2)
                    size_hint: (None, None)
                    #size: (dp(100), dp(100))
                    pos: ((self.parent.x + self.parent.width - dp(64)), (self.parent.y + self.parent.height - dp(106)))
                    icon: 'file-search'
                    icon_size: dp(32)
                    radius: [self.height / 2, ]
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark

                MDLabel:
                    text: 'First Name:'
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark
                    size_hint: (None, None)
                    size: (dp(128), dp(32))
                    pos: ((self.parent.x + dp(16)), (self.parent.y + self.parent.height - dp(150)))

                TextInput:
                    id: client_first_name
                    #md_bg_color: (1, 0, 0, 0.2)
                    size_hint: (None, None)
                    size: (self.parent.width - dp(160), dp(32))
                    pos: (self.parent.x + dp(144), self.parent.y + self.parent.height - dp(150))

                MDLabel:
                    text: 'Last Name:'
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark
                    size_hint: (None, None)
                    size: (dp(128), dp(32))
                    pos: ((self.parent.x + dp(16)), (self.parent.y + self.parent.height - dp(198)))

                TextInput:
                    id: clinet_last_name
                    size_hint: (None, None)
                    size: (self.parent.width - dp(160), dp(32))
                    pos: (self.parent.x + dp(144), self.parent.y + self.parent.height - dp(198))

                MDLabel:
                    text: 'Phone Number:'
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark
                    size_hint: (None, None)
                    size: (dp(128), dp(32))
                    pos: ((self.parent.x + dp(16)), (self.parent.y + self.parent.height - dp(246)))

                TextInput:
                    id: client_phone_number
                    size_hint: (None, None)
                    size: (self.parent.width - dp(160), dp(32))
                    pos: (self.parent.x + dp(144), self.parent.y + self.parent.height - dp(246))

                MDLabel:
                    text: 'email:'
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark
                    size_hint: (None, None)
                    size: (dp(128), dp(32))
                    pos: ((self.parent.x + dp(16)), (self.parent.y + self.parent.height - dp(294)))

                MDTextFieldRect:
                    id: client_email
                    size_hint: (None, None)
                    size: (self.parent.width - dp(160), dp(32))
                    pos: (self.parent.x + dp(144), self.parent.y + self.parent.height - dp(294))
                    line_anim: False
                    cursor_color: app.theme_cls.primary_dark

                MDRectangleFlatIconButton:
                    md_bg_color: app.theme_cls.primary_dark
                    size_hint: (0.25, 0.05)
                    #size: (800, dp(100))
                    pos: ((self.parent.x + self.parent.width - self.width - dp(16)), (self.parent.y + dp(16)))
                    icon: "content-save"
                    text: "save"
                    theme_text_color: "Custom"
                    text_color: "white"
                    line_color: "darkgrey"#app.theme_cls.primary_dark
                    theme_icon_color: "Custom"
                    icon_color: "white"
                    on_release: root.test_button()

            BorderBox:
                #md_bg_color: 'green'
                size_hint: (0.5, 1)
                pos_hint: {'x': 0.5, 'y': 0}

                MDIcon:
                    pos: (self.parent.x + dp(2), self.parent.y + self.parent.height - dp(34))
                    font_size: dp(32)
                    icon: 'devices'
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark

                MDLabel:
                    pos: (self.parent.x + dp(40), self.parent.y + self.parent.height - self.height)
                    size_hint: (None, None)
                    size: (dp(128), dp(32))
                    text: "Devices"
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark

                MDIconButton:
                    #md_bg_color: (0, 0, 0, 0.2)
                    size_hint: (None, None)
                    #size: (dp(100), dp(100))
                    pos: ((self.parent.x + self.parent.width - dp(64)), (self.parent.y + self.parent.height - dp(106)))
                    icon: 'file-search'
                    icon_size: dp(32)
                    radius: [self.height / 2, ]
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark

                MDLabel:
                    text: 'Device Type:'
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark
                    size_hint: (None, None)
                    size: (dp(128), dp(32))
                    pos: ((self.parent.x + dp(16)), (self.parent.y + self.parent.height - dp(150)))

                Spinner:
                    id: device_type
                    #md_bg_color: (1, 0, 0, 0.2)
                    size_hint: (None, None)
                    size: (self.parent.width - dp(160), dp(32))
                    pos: (self.parent.x + dp(144), self.parent.y + self.parent.height - dp(150))
                    text: "Choose Type"
                    values: ['Phone', 'PC', 'Tablet']
                    background_normal: 'media/spinner-normal.png'
                    background_down: 'media/spinner-down.png'
                    color: "black"
                    option_cls: Factory.get("MySpinnerOption")

                MDLabel:
                    text: 'Device Brand:'
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark
                    size_hint: (None, None)
                    size: (dp(128), dp(32))
                    pos: ((self.parent.x + dp(16)), (self.parent.y + self.parent.height - dp(198)))

                Spinner:
                    id: device_brand
                    #md_bg_color: (1, 0, 0, 0.2)
                    size_hint: (None, None)
                    size: (self.parent.width - dp(160), dp(32))
                    pos: (self.parent.x + dp(144), self.parent.y + self.parent.height - dp(198))
                    text: "Choose brand"
                    values: ['Samsung', 'Huawei', 'Oppo', 'Xiaomi', 'Iphone', 'Nokia']
                    background_normal: 'media/spinner-normal.png'
                    background_down: 'media/spinner-down.png'
                    color: "black"
                    option_cls: Factory.get("MySpinnerOption")


                MDLabel:
                    text: 'Device Model'
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark
                    size_hint: (None, None)
                    size: (dp(128), dp(32))
                    pos: ((self.parent.x + dp(16)), (self.parent.y + self.parent.height - dp(246)))

                TextInput:
                    id: device_model
                    size_hint: (None, None)
                    size: (self.parent.width - dp(160), dp(32))
                    pos: (self.parent.x + dp(144), self.parent.y + self.parent.height - dp(246))

                MDLabel:
                    text: 'Phone Number:'
                    #theme_text_color: 'Custom'
                    #text_color: app.theme_cls.primary_dark
                    size_hint: (None, None)
                    size: (dp(128), dp(32))
                    pos: ((self.parent.x + dp(16)), (self.parent.y + self.parent.height - dp(294)))

                MDTextFieldRect:
                    size_hint: (None, None)
                    size: (self.parent.width - dp(160), dp(32))
                    pos: (self.parent.x + dp(144), self.parent.y + self.parent.height - dp(294))
                    line_anim: False
                    cursor_color: app.theme_cls.primary_dark

                MDLabel:
                    text: 'Phone Number:'
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark
                    size_hint: (None, None)
                    size: (dp(128), dp(32))
                    pos: ((self.parent.x + dp(16)), (self.parent.y + self.parent.height - dp(294)))

                TextInput:
                    size_hint: (None, None)
                    size: (self.parent.width - dp(160), dp(32))
                    pos: (self.parent.x + dp(144), self.parent.y + self.parent.height - dp(294))

                MDLabel:
                    text: 'Repair Level:'
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark
                    size_hint: (None, None)
                    size: (dp(128), dp(32))
                    pos: ((self.parent.x + dp(16)), (self.parent.y + self.parent.height - dp(342)))

                Spinner:
                    id: device_status
                    size_hint: (None, None)
                    size: (self.parent.width - dp(160), dp(32))
                    pos: (self.parent.x + dp(144), self.parent.y + self.parent.height - dp(342))
                    values: ['Defective', 'Repaired']
                    background_normal: 'media/spinner-normal.png'
                    background_down: 'media/spinner-down.png'

                MDRectangleFlatIconButton:
                    md_bg_color: app.theme_cls.primary_dark
                    size_hint: (0.25, 0.05)
                    #size: (800, dp(100))
                    pos: ((self.parent.x + self.parent.width - self.width - dp(16)), (self.parent.y + dp(16)))
                    icon: "content-save"
                    text: "save"
                    theme_text_color: "Custom"
                    text_color: "white"
                    line_color: "darkgrey"#app.theme_cls.primary_dark
                    theme_icon_color: "Custom"
                    icon_color: "white"
                    on_release: root.register_device()

        MDBoxLayout:
            md_bg_color: (1, 1, 0, 0.2)
            size_hint: (.2, .9)
            pos_hint: {'x': .8, 'y': 0}
            padding: [dp(10), dp(10)]

            BorderBox:
                size_hint: (1, 1)
                pos_hint: {'x': 0, 'y': 0}

                MDIcon:
                    pos: (self.parent.x + dp(2), self.parent.y + self.parent.height - dp(34))
                    font_size: dp(32)
                    icon: 'timer-sand-complete'
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark

                MDLabel:
                    pos: (self.parent.x + dp(40), self.parent.y + self.parent.height - self.height)
                    size_hint: (None, None)
                    size: (dp(128), dp(32))
                    text: "Complete"
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark

                ScrollView:
                    pos: (self.parent.x, self.parent.y)
                    size_hint: (None, None)
                    size: (self.parent.width, (self.parent.y + self.parent.height - dp(50)))
                    padding: [dp(10), dp(10)]
                    scroll_type: ['bars', 'content']
                    bar_width: 3
                    bar_color: app.theme_cls.primary_dark

                    GridLayout:
                        id: complete_container
                        cols: 1
                        padding: dp(10)
                        spacing: dp(5)
                        size_hint_y: None
                        height: self.minimum_height