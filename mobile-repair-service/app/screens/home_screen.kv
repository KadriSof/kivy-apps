#:import Factory kivy.factory.Factory

<BorderBoxLayout@MDBoxLayout>:
    canvas:
        Color:
            rgba: (0, 0, 0, .2)
        Line:
            rectangle: [self.x, self.y, self.width, self.height]
            width: dp(2)

<BorderFloatLayout@MDFloatLayout>:
    canvas:
        Color:
            rgba: (0, 0, 0, .2)
        Line:
            rectangle: [self.x, self.y, self.width, self.height]
            width: dp(2)


<BorderTextInput@TextInput>:
    background_normal: ''
    background_active: ''
    cursor_color: "grey"
    foreground_color: (0, 0, 0, 1)

    canvas.before:
        Color:
            rgba: (0, 0, 0, .5) if self.focus == True else (0, 0, 0, .3)
        Line:
            rectangle: [self.x, self.y, self.width, self.height]
            width: dp(1)
        Color:
            rgba: (0, 0, 0, 1)

<MySpinner@Spinner>:
    background_normal: 'media/spinner-normal.png'
    background_down: 'media/spinner-down.png'
    values: ['Phone', 'PC', 'Tablet']
    text_size: (self.width, None)
    bold: True
    halign: 'center'
    valign: 'center'
    shorten: True
    color: "dimgray"
    option_cls: Factory.get("MySpinnerOption")

    canvas.before:
        Color:
            rgba: (0, 0, 0, .6) if self.state == 'down' else (0, 0, 0, .4)
        Line:
            rectangle: [self.x, self.y, self.width, self.height]
            width: dp(1)
        Color:
            rgba: (0, 0, 0, 1)

<MySpinnerOption@SpinnerOption>:
    background_color: "lightsteelblue" if self.state == 'down' else "lavender"
    background_normal: ''
    background_down: ''
    color: "darkslategray"
    size_hint_y: None
    height: dp(32)

    canvas:
        Color:
            rgba: (0, 0, 0, .2)
        Line:
            rectangle: [self.x, self.y, self.width, self.height]
            width: dp(1)

###

<HomeScreen>:
    id: home_screen

    MDFloatLayout:
        md_bg_color: 'white'

        MDBoxLayout:
            size_hint: (1, .1)
            pos_hint: {'x': .0, 'y': .9}
            padding: [dp(5), dp(0)]
            spacing: dp(5)

            canvas:
                Color:
                    rgba: (0, 0, 0, .1)
                Line:
                    rectangle: [self.x, self.y, self.width, self.height]
                    width: dp(5)
                Color:
                    rgba: (48/255, 63/255, 159/255, 1)
                Rectangle:
                    pos: self.pos
                    size: self.size

            Image:
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                size_hint: (None, None)
                size: (dp(48), self.parent.height)
                source: "media/logo-bgwhite.png"
                fit_mode: "scale-down"

            MDLabel:
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                size_hint: (None, None)
                size: (dp(72), dp(48))
                text: "Manage:"
                bold: True
                font_style: "JetBrainsMono"
                theme_text_color: 'Custom'
                text_color: "white"

            MDRaisedButton:
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                size_hint: (None, None)
                size: (dp(80), dp(48))
                md_bg_color: "white"
                text: "Users"
                font_name: "JetBrainsMono"
                font_style: "Button"
                text_color: app.theme_cls.primary_dark
                line_color: "grey"
                color: "black"
                shorten: True
                disabled: True

            MDRaisedButton:
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                size_hint: (None, None)
                size: (dp(128), dp(80))
                md_bg_color: "white"
                text: "Clients"
                font_name: "JetBrainsMono"
                font_style: "Button"
                text_color: app.theme_cls.primary_dark
                line_color: "grey"
                color: "black"
                shorten: True
                on_release: root.open_search_client_popup()

            MDRaisedButton:
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                size_hint: (None, None)
                size: (dp(128), dp(48))
                md_bg_color: "white"
                text: "Devices"
                font_name: "JetBrainsMono"
                font_style: "Button"
                text_color: app.theme_cls.primary_dark
                line_color: "grey"
                color: "black"
                shorten: True
                disabled: True

            MDRaisedButton:
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                size_hint: (None, None)
                size: (dp(128), dp(48))
                md_bg_color: "white"
                text: "Reports"
                font_name: "JetBrainsMono"
                font_style: "Button"
                text_color: app.theme_cls.primary_dark
                line_color: "grey"
                color: "black"
                shorten: True
                disabled: True

            MDBoxLayout:
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}

                canvas:
                    Color:
                        rgba: (1, 1, 1, 1)

                    RoundedRectangle:
                        pos: (self.x, self.y + dp(10))
                        size: (self.width, self.parent.height - dp(20))
                        radius: [4, 4, 4, 4]

            MDLabel:
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                size_hint: (None, None)
                size: (dp(72), dp(48))
                text: "Logout:"
                bold: True
                font_style: "JetBrainsMono"
                theme_text_color: 'Custom'
                text_color: "white"

            MDFloatingActionButton:
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                #size_hint: (0.1, 1)
                md_bg_color: "white"
                type: "standard"
                icon: "logout-variant"
                icon_size: dp(32)
                radius: [self.height / 2, ]
                theme_text_color: 'Custom'
                text_color: app.theme_cls.primary_dark

        MDBoxLayout:
            size_hint: (.2, .9)
            pos_hint: {'x': .0, 'y': 0}
            padding: [dp(10), dp(10)]

            BorderFloatLayout:
                size_hint: (1, 1)
                pos_hint: {'x': 0, 'y': 0}

                MDIcon:
                    pos: (self.parent.x + dp(4), self.parent.y + self.parent.height - dp(36))
                    font_size: dp(32)
                    icon: 'timer-sand'
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark

                MDLabel:
                    pos: (self.parent.x + dp(40), self.parent.y + self.parent.height - self.height - dp(4))
                    size_hint: (None, None)
                    size: (dp(144), dp(32))
                    text: "Pending"
                    bold: True
                    font_style: "JetBrainsMono"
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark

                ScrollView:
                    pos: (self.parent.x, self.parent.y)
                    size_hint: (None, None)
                    size: (self.parent.width, (self.parent.y + self.parent.height - dp(50)))
                    padding: [dp(10), dp(10)]
                    scroll_type: ['bars', 'content']
                    bar_width: 3
                    bar_color: app.theme_cls.primary_dark

                    GridLayout:
                        id: pending_container
                        cols: 1
                        padding: dp(10)
                        spacing: dp(5)
                        size_hint_y: None
                        height: self.minimum_height

        MDBoxLayout:
            size_hint: (.6, .9)
            pos_hint: {'x': .2, 'y': 0}
            padding: [dp(10), dp(10)]
            spacing: dp(10)

            BorderFloatLayout:
                size_hint: (0.5, 1)
                pos_hint: {'x': 0, 'y': 0}

                MDIcon:
                    pos: (self.parent.x + dp(4), self.parent.y + self.parent.height - dp(36))
                    font_size: dp(32)
                    icon: 'account-plus'
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark

                MDLabel:
                    pos: (self.parent.x + dp(40), self.parent.y + self.parent.height - self.height - dp(4))
                    size_hint: (None, None)
                    size: (dp(144), dp(32))
                    text: "Client"
                    bold: True
                    font_style: "JetBrainsMono"
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark

                MDLabel:
                    pos: ((self.parent.x + self.parent.width - dp(164)), (self.parent.y + self.parent.height - dp(94)))
                    size_hint: (None, None)
                    size: (dp(112), dp(32))
                    text: "New Client"
                    font_style: "JetBrainsMono"
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark

                MDIconButton:
                    pos: ((self.parent.x + self.parent.width - dp(64)), (self.parent.y + self.parent.height - dp(106)))
                    icon: 'new-box'
                    icon_size: dp(32)
                    radius: [self.height / 2, ]
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark
                    on_release: root.new_client_entry()

                MDLabel:
                    pos: ((self.parent.x + dp(16)), (self.parent.y + self.parent.height - dp(150)))
                    size_hint: (None, None)
                    size: (dp(144), dp(32))
                    text: 'First Name:'
                    font_style: "JetBrainsMono"
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark

                BorderTextInput:
                    id: client_first_name
                    pos: ((self.parent.x + dp(160)), (self.parent.y + self.parent.height - dp(150)))
                    size_hint: (None, None)
                    size: (self.parent.width - dp(176), dp(32))
                    multiline: False
                    halign: 'center'
                    on_text_validate: root.validate_name(self)

                MDLabel:
                    pos: ((self.parent.x + dp(16)), (self.parent.y + self.parent.height - dp(198)))
                    size_hint: (None, None)
                    size: (dp(144), dp(32))
                    text: 'Last Name:'
                    font_style: "JetBrainsMono"
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark

                BorderTextInput:
                    id: client_last_name
                    size_hint: (None, None)
                    size: (self.parent.width - dp(176), dp(32))
                    pos: (self.parent.x + dp(160), self.parent.y + self.parent.height - dp(198))
                    multiline: False
                    halign: 'center'
                    on_text_validate: root.validate_name(self)

                MDLabel:
                    pos: ((self.parent.x + dp(16)), (self.parent.y + self.parent.height - dp(246)))
                    size_hint: (None, None)
                    size: (dp(144), dp(32))
                    text: 'Phone Number:'
                    font_style: "JetBrainsMono"
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark

                BorderTextInput:
                    id: client_phone_number
                    size_hint: (None, None)
                    size: (self.parent.width - dp(176), dp(32))
                    pos: (self.parent.x + dp(160), self.parent.y + self.parent.height - dp(246))
                    input_filter: 'int'
                    multiline: False
                    halign: 'center'
                    on_text_validate: root.validate_phone_number(self)

                MDLabel:
                    pos: ((self.parent.x + dp(16)), (self.parent.y + self.parent.height - dp(294)))
                    size_hint: (None, None)
                    size: (dp(144), dp(32))
                    text: 'Email:'
                    font_style: "JetBrainsMono"
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark

                BorderTextInput:
                    id: client_email
                    size_hint: (None, None)
                    size: (self.parent.width - dp(176), dp(32))
                    pos: (self.parent.x + dp(160), self.parent.y + self.parent.height - dp(294))
                    multiline: False
                    halign: 'center'
                    cursor_color: app.theme_cls.primary_dark
                    on_text_validate: root.verify_email(self)
                    on_focus: root.validate_email(self)

                MDLabel:
                    id: client_input_validation
                    pos: (self.parent.x, self.parent.y + dp(56))
                    size_hint: (1, .1)
                    padding: dp(16)
                    text: ""
                    markup: True
                    color: app.theme_cls.primary_dark
                    font_style: 'Subtitle2'

                MDRectangleFlatIconButton:
                    pos: ((self.parent.x + self.parent.width - self.width - dp(16)), (self.parent.y + dp(16)))
                    size_hint: (0.25, 0.05)
                    md_bg_color: app.theme_cls.primary_dark
                    icon: "content-save"
                    text: "save"
                    font_style: "Button"
                    theme_text_color: "Custom"
                    text_color: "white"
                    line_color: "darkgrey"
                    theme_icon_color: "Custom"
                    icon_color: "white"
                    on_release: root.register_client()

            BorderFloatLayout:
                size_hint: (0.5, 1)
                pos_hint: {'x': 0.5, 'y': 0}

                MDIcon:
                    pos: (self.parent.x + dp(4), self.parent.y + self.parent.height - dp(36))
                    font_size: dp(32)
                    icon: 'devices'
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark

                MDLabel:
                    pos: (self.parent.x + dp(40), self.parent.y + self.parent.height - self.height - dp(4))
                    size_hint: (None, None)
                    size: (dp(144), dp(32))
                    text: "Devices"
                    bold: True
                    font_style: "JetBrainsMono"
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark

                MDLabel:
                    pos: ((self.parent.x + self.parent.width - dp(164)), (self.parent.y + self.parent.height - dp(94)))
                    size_hint: (None, None)
                    size: (dp(112), dp(32))
                    text: "New Device"
                    font_style: "JetBrainsMono"
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark

                MDIconButton:
                    size_hint: (None, None)
                    pos: ((self.parent.x + self.parent.width - dp(64)), (self.parent.y + self.parent.height - dp(106)))
                    icon: 'new-box'
                    icon_size: dp(32)
                    radius: [self.height / 2, ]
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark
                    on_release: root.new_device_entry()

                MDLabel:
                    text: 'Device Type:'
                    font_style: "JetBrainsMono"
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark
                    size_hint: (None, None)
                    size: (dp(144), dp(32))
                    pos: ((self.parent.x + dp(16)), (self.parent.y + self.parent.height - dp(150)))

                MySpinner:
                    id: device_type
                    size_hint: (None, None)
                    size: (self.parent.width - dp(167), dp(32))
                    pos: (self.parent.x + dp(160), self.parent.y + self.parent.height - dp(150))
                    values: ['Mobile', 'PC', 'Tablet']
                    on_text: root.set_device_brand(self.text)

                MDLabel:
                    text: 'Device Brand:'
                    font_style: "JetBrainsMono"
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark
                    size_hint: (None, None)
                    size: (dp(144), dp(32))
                    pos: ((self.parent.x + dp(16)), (self.parent.y + self.parent.height - dp(198)))

                MySpinner:
                    id: device_brand
                    size_hint: (None, None)
                    size: (self.parent.width - dp(167), dp(32))
                    pos: (self.parent.x + dp(160), self.parent.y + self.parent.height - dp(198))
                    values: ['Samsung', 'Huawei', 'Oppo', 'Xiaomi', 'Iphone', 'Nokia']

                MDLabel:
                    text: 'Device Model:'
                    font_style: "JetBrainsMono"
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark
                    size_hint: (None, None)
                    size: (dp(144), dp(32))
                    pos: ((self.parent.x + dp(16)), (self.parent.y + self.parent.height - dp(246)))

                BorderTextInput:
                    id: device_model
                    size_hint: (None, None)
                    size: (self.parent.width - dp(167), dp(32))
                    pos: (self.parent.x + dp(160), self.parent.y + self.parent.height - dp(246))
                    halign: 'center'

                MDLabel:
                    pos: ((self.parent.x + dp(16)), (self.parent.y + self.parent.height - dp(294)))
                    size_hint: (None, None)
                    size: (dp(144), dp(32))
                    text: "Fault Type:"
                    font_style: "JetBrainsMono"
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark

                MySpinner:
                    id: fault_type
                    size_hint: (None, None)
                    size: (self.parent.width - dp(167), dp(32))
                    pos: (self.parent.x + dp(160), self.parent.y + self.parent.height - dp(294))
                    values: ['Hardware', 'Firmware']
                    on_text: root.set_fault_type(self.text)

                MDLabel:
                    text: "Fault Code:"
                    font_style: "JetBrainsMono"
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark
                    size_hint: (None, None)
                    size: (dp(144), dp(32))
                    pos: ((self.parent.x + dp(16)), (self.parent.y + self.parent.height - dp(342)))

                MySpinner:
                    id: fault_code
                    size_hint: (None, None)
                    size: (self.parent.width - dp(167), dp(32))
                    pos: (self.parent.x + dp(160), self.parent.y + self.parent.height - dp(342))
                    values: ['HF01: Microphone Problem', 'HF02: Speaker Problem']

                MDLabel:
                    text: 'Fault Level:'
                    font_style: "JetBrainsMono"
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark
                    size_hint: (None, None)
                    size: (dp(144), dp(32))
                    pos: ((self.parent.x + dp(16)), (self.parent.y + self.parent.height - dp(390)))

                MySpinner:
                    id: fault_level
                    size_hint: (None, None)
                    size: (self.parent.width - dp(167), dp(32))
                    pos: (self.parent.x + dp(160), self.parent.y + self.parent.height - dp(390))
                    values: ['Critical', 'Major', 'Minor']

                MDLabel:
                    id: device_input_validation
                    pos: (self.parent.x, self.parent.y + dp(56))
                    size_hint: (1, .1)
                    padding: dp(16)
                    text: ""
                    markup: True
                    color: app.theme_cls.primary_dark
                    font_style: 'Subtitle2'

                MDRectangleFlatIconButton:
                    id: register_device_button
                    pos: ((self.parent.x + self.parent.width - self.width - dp(16)), (self.parent.y + dp(16)))
                    size_hint: (0.25, 0.05)
                    md_bg_color: app.theme_cls.primary_dark
                    icon: "content-save"
                    text: "save"
                    font_style: "Button"
                    theme_text_color: "Custom"
                    text_color: "white"
                    line_color: "darkgrey"
                    theme_icon_color: "Custom"
                    icon_color: "white"
                    disabled: True
                    on_release: root.register_device()


        MDBoxLayout:
            size_hint: (.2, .9)
            pos_hint: {'x': .8, 'y': 0}
            padding: [dp(10), dp(10)]

            BorderFloatLayout:
                size_hint: (1, 1)
                pos_hint: {'x': 0, 'y': 0}

                MDIcon:
                    pos: (self.parent.x + dp(4), self.parent.y + self.parent.height - dp(36))
                    font_size: dp(32)
                    icon: 'timer-sand-complete'
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark

                MDLabel:
                    pos: (self.parent.x + dp(40), self.parent.y + self.parent.height - self.height - dp(4))
                    size_hint: (None, None)
                    size: (dp(128), dp(32))
                    text: "Complete"
                    bold: True
                    font_style: "JetBrainsMono"
                    theme_text_color: 'Custom'
                    text_color: app.theme_cls.primary_dark

                ScrollView:
                    pos: (self.parent.x, self.parent.y)
                    size_hint: (None, None)
                    size: (self.parent.width, (self.parent.y + self.parent.height - dp(50)))
                    padding: [dp(10), dp(10)]
                    scroll_type: ['bars', 'content']
                    bar_width: 3
                    bar_color: app.theme_cls.primary_dark

                    GridLayout:
                        id: complete_container
                        cols: 1
                        padding: dp(10)
                        spacing: dp(5)
                        size_hint_y: None
                        height: self.minimum_height


#### Search Client Popup####
<SearchClientPopup>
    size_hint: (.4, .8)
    background: ''
    background_color: (1, 1, 1, 1)
    title: "Search Client"
    title_font: "JetBrainsMono"
    bold: True
    title_size: "20sp"
    title_color: app.theme_cls.primary_dark
    separator_color: app.theme_cls.primary_dark

    content:
    MDBoxLayout:
        orientation: 'vertical'

        MDBoxLayout:
            size_hint: (1, .2)
            padding: [dp(10), dp(10)]
            spacing: dp(10)

            MySpinner:
                id: search_client_filter
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                size_hint: (.3, .4)
                text: "Search by:"
                values: ['First Name', 'Last Name', 'Phone Number']
                on_text: root.filter_by(self.text)

            BorderTextInput:
                id: search_client_text
                pos_hint: {'center_x': 0.5, 'center_y': 0.5}
                size_hint: (.7, .4)
                on_text: root.search_client(self.text)

        MDBoxLayout:
            size_hint: (1, .05)
            padding: [dp(10), dp(0)]

            MDLabel:
                size_hint: (.3, 1)
                text: "First Name"
                theme_text_color: 'Custom'
                text_color: app.theme_cls.primary_dark
                shorten: True
                halign: 'center'
                valign: 'center'

            MDLabel:
                size_hint: (.3, 1)
                text: "Last Name"
                theme_text_color: 'Custom'
                text_color: app.theme_cls.primary_dark
                shorten: True
                halign: 'center'
                valign: 'center'

            MDLabel:
                size_hint: (.3, 1)
                text: "Phone Number"
                theme_text_color: 'Custom'
                text_color: app.theme_cls.primary_dark
                shorten: True
                halign: 'center'
                valign: 'center'

            MDLabel:
                size_hint: (.1, 1)
                text: ""

        MDBoxLayout:
            size_hint: (1, .75)

            ScrollView:
                scroll_type: ['bars', 'content']
                bar_width: 3
                bar_color: app.theme_cls.primary_dark

                GridLayout:
                    id: search_client_container
                    cols: 1
                    padding: dp(10)
                    spacing: dp(5)
                    size_hint_y: None
                    height: self.minimum_height


#### Device Item View Model ####
<DeviceStatusItemViewModel>
    canvas:
        Color:
            rgba: (0, 0, 0, .2)
        Line:
            rectangle: [self.x, self.y, self.width, self.height]
            width: dp(1)

    orientation: 'horizontal'
    size_hint_y: None
    height: dp(80)
    padding: dp(10)
    spacing: dp(5)

    MDIconButton:
        size_hint: (.2, 1)
        icon: 'information-box'
        icon_size: dp(32)
        radius: [self.height / 2, ]
        theme_text_color: 'Custom'
        text_color: app.theme_cls.primary_dark
        on_release: root.open_device_info_popup()

    MDBoxLayout:
        orientation: 'vertical'
        size_hint: (.8, 1)
        spacing: dp(2)

        MDLabel:
            text: f"DEVICE ID: {format(root.device_id, '04d')}"
            theme_text_color: 'Custom'
            font_style: 'Caption'
            text_color: app.theme_cls.primary_dark

        MDLabel:
            text: root.device_brand
            font_style:
            theme_text_color: 'Custom'
            font_style: 'Overline'
            text_color: app.theme_cls.primary_dark

        MDLabel:
            text: root.device_status
            theme_text_color: 'Custom'
            font_style: 'Overline'
            text_color: app.theme_cls.primary_dark

    MDIconButton:
        id: check_button
        size_hint: (.2, 1)
        icon: 'check'
        icon_size: dp(32)
        radius: [self.height / 2, ]
        theme_text_color: 'Custom'
        text_color: app.theme_cls.primary_dark
        on_release: app.root.get_screen('home_screen').transfer_device(root)


#### Device Information Popup ####
<DeviceInformationPopup>
    size_hint: (.5, .8)
    background: ''
    background_color: (1, 1, 1, 1)
    title: "Device Information"
    title_font: "JetBrainsMono"
    bold: True
    title_size: "20sp"
    title_color: app.theme_cls.primary_dark
    separator_color: app.theme_cls.primary_dark

    content:
    MDBoxLayout:
        orientation: 'horizontal'
        #padding: [dp(0), dp(10)]
        spacing: dp(10)

        MDBoxLayout:
            size_hint: (.5, 1)
            orientation: 'vertical'

            MDLabel:
                size_hint: (1, .1)
                padding: [dp(10), dp(0)]
                text: "Client"
                font_style: "JetBrainsMono"
                font_size: "18sp"
                bold: True

            MDGridLayout:
                size_hint: (1, .2)
                cols: 2
                rows: 2

                canvas:
                    Color:
                        rgba: (0, 0, 0, .2)
                    Line:
                        rectangle: [self.x, self.y, self.width, self.height]
                        width: dp(2)

                MDLabel:
                    size_hint: (.4, 1)
                    padding: [dp(10), dp(0)]
                    text: "Full Name:"
                    bold: True

                MDLabel:
                    id: client_full_name
                    size_hint: (.6, 1)
                    padding: [dp(10), dp(0)]
                    text: root.client_full_name

                MDLabel:
                    size_hint: (.4, 1)
                    padding: [dp(10), dp(0)]
                    text: "Phone:"
                    bold: True

                MDLabel:
                    id: client_phone_number
                    size_hint: (.6, 1)
                    padding: [dp(10), dp(0)]
                    text: root.client_phone_number

            MDLabel:
                size_hint: (1, .1)
                padding: [dp(10), dp(0)]
                text: "Device"
                font_style: "JetBrainsMono"
                font_size: "18sp"
                bold: True

            MDGridLayout:
                size_hint: (1, .6)
                cols: 2
                rows: 6

                canvas:
                    Color:
                        rgba: (0, 0, 0, .2)
                    Line:
                        rectangle: [self.x, self.y, self.width, self.height]
                        width: dp(2)

                MDLabel:
                    size_hint: (.4, 1)
                    padding: [dp(10), dp(0)]
                    text: "Type:"
                    bold: True

                MDLabel:
                    id: device_type
                    size_hint: (.6, 1)
                    padding: [dp(10), dp(0)]
                    text: root.device_type

                MDLabel:
                    size_hint: (.4, 1)
                    padding: [dp(10), dp(0)]
                    text: "Brand:"
                    bold: True

                MDLabel:
                    id: device_brand
                    size_hint: (.6, 1)
                    padding: [dp(10), dp(0)]
                    text: root.device_brand

                MDLabel:
                    size_hint: (.4, 1)
                    padding: [dp(10), dp(0)]
                    text: "Model:"
                    bold: True

                MDLabel:
                    id: device_model
                    size_hint: (.6, 1)
                    padding: [dp(10), dp(0)]
                    text: root.device_model

                MDLabel:
                    size_hint: (.4, 1)
                    padding: [dp(10), dp(0)]
                    text: "Fault Type:"
                    bold: True

                MDLabel:
                    id: fault_type
                    size_hint: (.6, 1)
                    padding: [dp(10), dp(0)]
                    text: root.fault_type

                MDLabel:
                    size_hint: (.4, 1)
                    padding: [dp(10), dp(0)]
                    text: "Fault Code:"
                    bold: True

                MDLabel:
                    id: fault_code
                    size_hint: (.6, 1)
                    padding: [dp(10), dp(0)]
                    text: root.fault_code

                MDLabel:
                    size_hint: (.4, 1)
                    padding: [dp(10), dp(0)]
                    text: "Fault Level:"
                    bold: True

                MDLabel:
                    id: fault_level
                    size_hint: (.6, 1)
                    padding: [dp(10), dp(0)]
                    text: root.fault_level

        MDBoxLayout:
            size_hint: (.5, 1)
            orientation: 'vertical'

            MDLabel:
                size_hint: (1, .1)
                padding: [dp(10), dp(0)]
                text: "Diagnostic Report"
                font_style: "JetBrainsMono"
                font_size: "18sp"
                bold: True

            BorderBoxLayout:
                id: diagnostic_report_section
                size_hint: (1, .9)
                orientation: 'vertical'
                padding: [dp(10), dp(10)]
                spacing: dp(10)

                MDLabel:
                    size_hint: (1, .1)
                    padding: [dp(10), dp(0)]
                    text: "Fill in the report details below:"

                BorderTextInput:
                    id: report_details
                    size_hint: (1, .9)
                    padding: [dp(10), dp(10)]
                    text_size: self.size
                    valign: 'top'

                MDRectangleFlatIconButton:
                    id: register_report_button
                    pos_hint: {'center_x': .875, 'center_y': .5}
                    size_hint: (0.25, 0.05)
                    md_bg_color: app.theme_cls.primary_dark
                    icon: "content-save"
                    text: "save"
                    font_style: "Button"
                    theme_text_color: "Custom"
                    text_color: "white"
                    line_color: "darkgrey"
                    theme_icon_color: "Custom"
                    icon_color: "white"
                    on_release: root.register_diagnostic_report()


#### Client Item View Model ####
<ClientItemViewModel>
    orientation: 'horizontal'
    size_hint_y: None
    height: dp(80)

    canvas:
        Color:
            rgba: (0, 0, 0, .2)
        Line:
            rectangle: [self.x, self.y, self.width, self.height]
            width: dp(1)

    MDLabel:
        text: root.client_first_name
        size_hint: (.3, 1)
        theme_text_color: 'Custom'
        text_color: "black"
        shorten: True
        halign: 'center'
        valign: 'center'

    MDLabel:
        text: root.client_last_name
        size_hint: (.3, 1)
        theme_text_color: 'Custom'
        text_color: "black"
        shorten: True
        halign: 'center'
        valign: 'center'

    MDLabel:
        text: root.client_phone_number
        size_hint: (.3, 1)
        theme_text_color: 'Custom'
        text_color: "black"
        shorten: True
        halign: 'center'
        valign: 'center'

    MDIconButton:
        size_hint: (.1, 1)
        icon: 'home-import-outline'
        icon_size: dp(32)
        radius: [self.height / 2, ]
        theme_text_color: 'Custom'
        text_color: app.theme_cls.primary_dark
        on_press: app.root.get_screen('home_screen').import_client_information(root)
